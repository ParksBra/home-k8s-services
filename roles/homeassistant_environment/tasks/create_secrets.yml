- name: Create Cloudflare dns api token secret
  kubernetes.core.k8s:
    state: present
    definition:
      apiVersion: v1
      kind: Secret
      metadata:
        name: "{{ cert_manager_cloudflare_secret_name }}"
        namespace: "cert-manager"
      type: Opaque
      stringData:
        api-key: "{{ cert_manager_cloudflare_api_token }}"
    kubeconfig: "{{ k8s_kubectl_config_path }}"
